# ------------------------------------------------------------
#
### Deploy this docker remotely
#
# WEBPASSWORD="PASTE_PASSWORD_HERE"; CONFIG_DIR="/root/docker-configs/pihole"; DOMAIN=".localdomain"; mkdir -p "${CONFIG_DIR}/etc/dnsmasq.d"; mkdir -p "${CONFIG_DIR}/etc/pihole"; curl -sL "https://raw.githubusercontent.com/mcavallo-git/cloud-infrastructure/master/var/lib/docker-compose/docker-compose.pihole.yml" -o "${CONFIG_DIR}/docker-compose.pihole.yml"; env CONFIG_DIR="${CONFIG_DIR}" DOMAIN="${DOMAIN}" WEBPASSWORD="${WEBPASSWORD}" docker-compose -f "${CONFIG_DIR}/docker-compose.pihole.yml" up -d; watch docker logs pihole;
# 
# ------------------------------------------------------------

version: "3"

services:
  pihole:
    image: pihole/pihole:latest
    ports:  # [Host]:[Docker] Port maps
      - "53:53/tcp"
      - "53:53/udp"
      - "67:67/udp"
      - "80:80/tcp"
      - "443:443/tcp"
    volumes:  # [Host]:[Docker] Filepath maps
      - /etc/hosts:/etc/hosts:ro
    environment:
      WEBUIBOXEDLAYOUT: 'boxed'
    cap_add:
      - NET_ADMIN  # Recommended but not required (required if pihole will host DHCP server)  -  https://github.com/pi-hole/docker-pi-hole#note-on-capabilities
    restart: always


# ------------------------------------------------------------
#
# Citation(s)
#
#   docs.pi-hole.net  |  "Overview of Pi-hole - Pi-hole documentation"  |  https://docs.pi-hole.net/
#
#   github.com  |  "GitHub - pi-hole/docker-pi-hole: Pi-hole in a docker container"  |  https://github.com/pi-hole/docker-pi-hole/
#
#   hub.docker.com  |  "pihole/pihole - Docker Hub"  |  https://hub.docker.com/r/pihole/pihole
#
# ------------------------------------------------------------