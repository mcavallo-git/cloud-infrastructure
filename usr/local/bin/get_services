#!/bin/bash
#
# LOCAL_BIN="/usr/local/bin/get_services" && echo "" > "${LOCAL_BIN}" && vi "${LOCAL_BIN}" && chmod 0755 "${LOCAL_BIN}";
#
# ------------------------------------------------------------

if [ -z "$1" ]; then
	# Show all services
	systemctl list-unit-files --no-legend | awk '{print $1}' | sed -rne 's/^([A-Za-z0-9\.\_\-]+)\.service$/\1/p' | sort 2> '/dev/null';

else
	#	Search for one, specific service
	MATCHED_SERVICE=$(systemctl list-unit-files --no-legend | awk '{print $1}' | sed -rne 's/^([A-Za-z0-9\.\_\-]+)\.service$/\1/p' | awk "/^${1}$/{print \$0}" | sort 2> '/dev/null';);
	if [ -z "${MATCHED_SERVICE}" ]; then
		# If service is NOT found: Exit with return-code 1
		exit 1;
	else
		# If service IS found: Show service & exit with return-code 0
		systemctl status "${MATCHED_SERVICE}";
		exit 0;
	fi;

fi;

###	List only services matching a given state, such as "enabled"
### systemctl list-unit-files --state=enabled --no-legend | awk '{print $1}' | sed -rne 's/^([A-Za-z0-9\.\_\-]+)\.service$/\1/p' | sort 2> '/dev/null';


# ------------------------------------------------------------
# SERVICE NAMING-CONVENTION/NAME-SYNTAX
#   |--> From services(5) in the Linux manual:
#
# "...
#
# The service-name should begin in the first column of the file, since leading spaces are not stripped.
# service-names can be any printable characters excluding space and tab.
# However, a conservative choice of characters should be used to minimize compatibility problems.
# For example, a-z, 0-9, and hyphen (-) would seem a sensible choice.
#
# ..."
#
#
# ------------------------------------------------------------
#
# Citation(s)
#
#   askubuntu.com  |  "How to list all enabled services from systemctl?"  |  https://askubuntu.com/a/795245
#
#   linux.die.net  |  "services(5) - Linux man page"  |  https://linux.die.net/man/5/services
#
#   www.cyberciti.biz  |  "Red Hat / CentOS Check and List Running Services Linux Command"  |  https://www.cyberciti.biz/faq/check-running-services-in-rhel-redhat-fedora-centoslinux/
#
# ------------------------------------------------------------